"use strict";
var Model = Object.create(null);
var date = new Date(), seconds = date.getMilliseconds();
Model = function (client) {
    Model.db = client;
    Model.db.connect();
    return Model;
};
Model.findAll = function (query, sort, prepend) {
    if (prepend === void 0) { prepend = false; }
    if (prepend && sort.length > 1) {
        var orderBy = void 0, limit = 1, keyword = void 0;
        if (sort.length > 2) {
            orderBy = sort.shift();
            limit = sort.pop();
            keyword = sort.pop();
            query = query + (" ORDER BY " + orderBy + " " + keyword + " LIMIT " + limit);
        }
        else {
            orderBy = sort.shift();
            keyword = sort.pop();
            query = query + (" ORDER BY " + orderBy + " " + keyword);
        }
        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                Model.db.query(query, function (err, snapshot) {
                    return err != null
                        ? reject(true)
                        : snapshot.rows.length >= 1
                            ? resolve(snapshot.rows)
                            : reject(true);
                });
            }, seconds);
        });
    }
    return new Promise(function (resolve, reject) {
        setTimeout(function () {
            Model.db.query(query, function (err, snapshot) {
                return !err ? resolve(snapshot.rows) : reject(err);
            });
        }, seconds);
    });
};
Model.findById = function (query, params) {
    return new Promise(function (resolve, reject) {
        setTimeout(function () {
            return Model.db.query(query, params, function (err, snapshot) {
                return err != null
                    ? reject(true)
                    : snapshot.rows.length >= 1
                        ? resolve(snapshot.rows)
                        : reject(true);
            });
        }, seconds);
    });
};
Model.push = function (query, values) {
    return new Promise(function (resolve) {
        return Model.db.query(query, values, function (err) { return resolve(err); });
    });
};
Model.update = function (query) {
    return new Promise(function (resolve) {
        return Model.db.query(query, function (err) { return resolve(err); });
    });
};
Model.delete = function (query) {
    return new Promise(function (resolve) {
        return Model.db.query(query, function (err) { return resolve(err); });
    });
};
module.exports = Model;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU1BLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEMsSUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsRUFDckIsT0FBTyxHQUFXLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQU8zQyxLQUFLLEdBQUcsVUFBQyxNQUFvQjtJQUMzQixLQUFLLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQztJQUNsQixLQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBRW5CLE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQyxDQUFDO0FBU0YsS0FBSyxDQUFDLE9BQU8sR0FBRyxVQUNkLEtBQWEsRUFDYixJQUFrQyxFQUNsQyxPQUF3QjtJQUF4Qix3QkFBQSxFQUFBLGVBQXdCO0lBRXhCLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQzlCLElBQUksT0FBTyxTQUFvQixFQUM3QixLQUFLLEdBQXVCLENBQUMsRUFDN0IsT0FBTyxTQUFvQixDQUFDO1FBRTlCLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDbkIsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUN2QixLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ25CLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFFckIsS0FBSyxHQUFHLEtBQUssSUFBRyxlQUFhLE9BQU8sU0FBSSxPQUFPLGVBQVUsS0FBTyxDQUFBLENBQUM7U0FDbEU7YUFBTTtZQUNMLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdkIsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUVyQixL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Q0FBQyxLQUFLLEVBQUUsVUFBQyxHQUF3QixJQUFLLE9BQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFaLENBQVksQ0FBQztJQUFqRSxDQUFpRSxDQUNsRTtBQUZELENBRUMsQ0FBQztBQUdKLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIE1vZGVsXHJcbiAqXHJcbiAqIEBhdXRob3Igd2FkYWhrb2RlIDxtdnAuZGVkZWZpbGFyYXNAZ21haWwuY29tPlxyXG4gKiBAc2luY2UgdmVyc2lvbiAxLjEuOFxyXG4gKi9cclxubGV0IE1vZGVsID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCksXHJcbiAgc2Vjb25kczogbnVtYmVyID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RvciBvciBGdW5jdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIE1vZGVsXHJcbiAqL1xyXG5Nb2RlbCA9IChjbGllbnQ6IG9iamVjdCB8IGFueSkgPT4ge1xyXG4gIE1vZGVsLmRiID0gY2xpZW50O1xyXG4gIE1vZGVsLmRiLmNvbm5lY3QoKTtcclxuXHJcbiAgcmV0dXJuIE1vZGVsO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1lbmdhbWJpbCBzZW11YSBkYXRhIGRhcmkgZGF0YWJhc2VcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IHN0cmluZ1xyXG4gKiBAcGFyYW0gc29ydCBhcnJheXxudW1iZXJ8YW55XHJcbiAqIEBwYXJhbSBwcmVwZW5kIGJvb2xlYW5cclxuICovXHJcbk1vZGVsLmZpbmRBbGwgPSAoXHJcbiAgcXVlcnk6IHN0cmluZyxcclxuICBzb3J0OiBBcnJheTxzdHJpbmcgfCBudW1iZXIgfCBhbnk+LFxyXG4gIHByZXBlbmQ6IGJvb2xlYW4gPSBmYWxzZVxyXG4pID0+IHtcclxuICBpZiAocHJlcGVuZCAmJiBzb3J0Lmxlbmd0aCA+IDEpIHtcclxuICAgIGxldCBvcmRlckJ5OiBzdHJpbmcgfCB1bmRlZmluZWQsXHJcbiAgICAgIGxpbWl0OiBudW1iZXIgfCB1bmRlZmluZWQgPSAxLFxyXG4gICAgICBrZXl3b3JkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgaWYgKHNvcnQubGVuZ3RoID4gMikge1xyXG4gICAgICBvcmRlckJ5ID0gc29ydC5zaGlmdCgpO1xyXG4gICAgICBsaW1pdCA9IHNvcnQucG9wKCk7XHJcbiAgICAgIGtleXdvcmQgPSBzb3J0LnBvcCgpO1xyXG5cclxuICAgICAgcXVlcnkgPSBxdWVyeSArIGAgT1JERVIgQlkgJHtvcmRlckJ5fSAke2tleXdvcmR9IExJTUlUICR7bGltaXR9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9yZGVyQnkgPSBzb3J0LnNoaWZ0KCk7XHJcbiAgICAgIGtleXdvcmQgPSBzb3J0LnBvcCgpO1xyXG5cclxuICAgICAgcXVlcnkgPSBxdWVyeSArIGAgT1JERVIgQlkgJHtvcmRlckJ5fSAke2tleXdvcmR9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIE1vZGVsLmRiLnF1ZXJ5KFxyXG4gICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAoZXJyOiBvYmplY3QgfCBudWxsIHwgYW55LCBzbmFwc2hvdDogb2JqZWN0IHwgYW55KSA9PlxyXG4gICAgICAgICAgICBlcnIgIT0gbnVsbFxyXG4gICAgICAgICAgICAgID8gcmVqZWN0KHRydWUpXHJcbiAgICAgICAgICAgICAgOiBzbmFwc2hvdC5yb3dzLmxlbmd0aCA+PSAxXHJcbiAgICAgICAgICAgICAgPyByZXNvbHZlKHNuYXBzaG90LnJvd3MpXHJcbiAgICAgICAgICAgICAgOiByZWplY3QodHJ1ZSlcclxuICAgICAgICApO1xyXG4gICAgICB9LCBzZWNvbmRzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIE1vZGVsLmRiLnF1ZXJ5KFxyXG4gICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgIChlcnI6IG9iamVjdCB8IG51bGwgfCBhbnksIHNuYXBzaG90OiBvYmplY3QgfCBhbnkpID0+XHJcbiAgICAgICAgICAhZXJyID8gcmVzb2x2ZShzbmFwc2hvdC5yb3dzKSA6IHJlamVjdChlcnIpXHJcbiAgICAgICk7XHJcbiAgICB9LCBzZWNvbmRzKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNZW5nYW1iaWwgZGF0YSBkYXJpIGRhdGFiYXNlIGJlcmRhc2Fya2FuIHVzZXJuYW1lIGF0YXUgZW1haWxcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IHN0cmluZ1xyXG4gKiBAcGFyYW0gcGFyYW1zIGFycmF5XHJcbiAqL1xyXG5Nb2RlbC5maW5kQnlJZCA9IChxdWVyeTogc3RyaW5nLCBwYXJhbXM6IEFycmF5PHN0cmluZz4pID0+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgc2V0VGltZW91dChcclxuICAgICAgKCkgPT5cclxuICAgICAgICBNb2RlbC5kYi5xdWVyeShcclxuICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgcGFyYW1zLFxyXG4gICAgICAgICAgKGVycjogb2JqZWN0IHwgbnVsbCB8IGFueSwgc25hcHNob3Q6IG9iamVjdCB8IGFueSkgPT5cclxuICAgICAgICAgICAgZXJyICE9IG51bGxcclxuICAgICAgICAgICAgICA/IHJlamVjdCh0cnVlKVxyXG4gICAgICAgICAgICAgIDogc25hcHNob3Qucm93cy5sZW5ndGggPj0gMVxyXG4gICAgICAgICAgICAgID8gcmVzb2x2ZShzbmFwc2hvdC5yb3dzKVxyXG4gICAgICAgICAgICAgIDogcmVqZWN0KHRydWUpXHJcbiAgICAgICAgKSxcclxuICAgICAgc2Vjb25kc1xyXG4gICAgKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNZW55aW1wYW4gZGF0YSBrZWRhbGFtIGRhdGFiYXNlXHJcbiAqXHJcbiAqIEBwYXJhbSBxdWVyeSBzdHJpbmdcclxuICogQHBhcmFtIHZhbHVlcyBhcnJheVxyXG4gKi9cclxuTW9kZWwucHVzaCA9IChxdWVyeTogc3RyaW5nLCB2YWx1ZXM6IEFycmF5PHN0cmluZz4pID0+XHJcbiAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICBNb2RlbC5kYi5xdWVyeShxdWVyeSwgdmFsdWVzLCAoZXJyOiBvYmplY3QgfCBudWxsIHwgYW55KSA9PiByZXNvbHZlKGVycikpXHJcbiAgKTtcclxuXHJcbi8qKlxyXG4gKiBNZW1wZXJiYXJ1aSBkYXRhIHlhbmcgdGVyc2ltcGFuIGRpZGF0YWJhc2VcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IHN0cmluZ1xyXG4gKi9cclxuTW9kZWwudXBkYXRlID0gKHF1ZXJ5OiBzdHJpbmcpID0+XHJcbiAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICBNb2RlbC5kYi5xdWVyeShxdWVyeSwgKGVycjogb2JqZWN0IHwgbnVsbCB8IGFueSkgPT4gcmVzb2x2ZShlcnIpKVxyXG4gICk7XHJcblxyXG4vKipcclxuICogTWVuZ2hhcHVzIGRhdGEgZGFyaSBkYXRhYmFzZVxyXG4gKlxyXG4gKiBAcGFyYW0gcXVlcnkgc3RyaW5nXHJcbiAqL1xyXG5Nb2RlbC5kZWxldGUgPSAocXVlcnk6IHN0cmluZykgPT5cclxuICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cclxuICAgIE1vZGVsLmRiLnF1ZXJ5KHF1ZXJ5LCAoZXJyOiBvYmplY3QgfCBudWxsIHwgYW55KSA9PiByZXNvbHZlKGVycikpXHJcbiAgKTtcclxuXHJcbi8vIEV4cG9ydCBNb2RlbFxyXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGVsO1xyXG4iXX0=